syntax = "proto3";

package pipes;

import "google/protobuf/timestamp.proto";
import "types.proto";

// Health Ping
message PingRequest {
  string who_i_am = 1;
}

message PingResponse {
  google.protobuf.Timestamp response_date = 1;
  bool is_happy = 2;
}

// Utility (Danger, Remove later?)
message ResetRequest {}

message ResetResponse {
  bool reset_success = 1;
}

// User
message CreateUserRequest {
  User user = 1;
}

message CreateUserResponse {
  string vertex_id = 1;
  string username = 2;
}

// Project
message CreateProjectRequest {
  string data = 1;
}

message CreateProjectResponse {
  string vertex_id = 1;
  string project_name = 2;
}

message GetProjectRequest {
  ProjectContext project_context = 1;
}

message GetProjectResponse {
  string result = 1;
}

// Not actually in use now
message GetProjectsStatusRequest {
  string model_name = 1;
}

message GetProjectsStatusResponse {
  string projects = 1;
  string project_runs = 2;
}

message GetProjectOwnerRequest {
  ProjectContext project_context = 1;
}

message GetProjectOwnerResponse {
  string vertex_id = 1;
  User user = 2;
}

// Model
message CreateModelRequest {
  Model model = 1;
}

message CreateModelResponse {
  string vertex_id = 1;
  string model_name = 2;
}

message CreateModelRunRequest {
  ModelContext model_context = 1;
  string data = 2;
}

message CreateModelRunResponse {
  string vertex_id = 1;
  string model_run_name = 2;
}

message ListModelsRequest {
  ProjectRunContext project_run_context = 1;
}

message ListModelsResponse {
  string models = 1;
}

// Dataset
message CreateDatasetRequest {
  ModelRunContext model_run_context = 1;
  string data = 2;
}

message CreateDatasetResponse {
  string vertex_id = 1;
  string dataset_name = 2;
}

message ListDatasetsRequest {
  ModelRunContext model_run_context = 1;
}

message ListDatasetsResponse {
  string datasets = 1;
}

message GetDatasetOwnerRequest {
  DatasetContext dataset_context = 1;
}

message GetDatasetOwnerResponse {
  string vertex_id = 1;
  User dataset_owner = 2;
}

message GetDatasetLocationRequest {
  DatasetContext dataset_context = 1;
}

message GetDatasetLocationResponse {
  string location = 1;
}
